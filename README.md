# اسکریپت بکاپ خودکار MirzaBOT در هاست
با کمک این اسکریپت ساده و **ثبت کرون جاب دستی در داشبورد cpanel** میتوانید از دیتابیس‌های موجود در phpMyAdmin روی هاستتون بصورت خودکار بکاپ بگیرید و در تلگرام ارسال کنید .


‌
## مراحل نصب و اجرای اسکریپت 
### 1.دانلود اسکریپت
- در اولین مرحله باید سورس این ریپازیتوری رو دانلود و در فولدر `public_html` استخراج کنید

### 2. تنظیم فایل کانفیگ
- در مرحله دوم باید به فولدر `backup/src` برید و فایل `auto_backuper.php` رو ویرایش کنید
- در ابتدای فایل بخش `Config` مشخصات ربات، آی‌دی عددی کاربر، دایکتوری فولدری که می‌خواهید از آن بکاپ بگیرید و محل ذخیره فایل نهایی بکاپ رو تغییر بدید .
  - آدرس توکن ربات **بات‌فادر** `$BOT_TOKEN` | ربات @BotFather
  - **آی‌دی عددی** تلگرام کاربر `$ADMIN_CHATID` | جهت ارسال به کاربر
  - **نام کاربری هاست** `$HOSTPATH` | جهت خواندن دقیق دایرکتوری

### 3. ثبت کرون‌جاب
در مرحله نهایی بعد از تنظیم فایل کانفیگ باید کرون‌جاب هایی برای خودکاری سازی فرایند اسکریپت ایجاد کنید
  - در هاست cpanel به بخش **Advanced** و ابزار **CronJob** رو انتخاب کنید
  - در این مرحله لازمه که 2 کرون جاب ، یکی برای ایجاد دیتابیس در هاست و دومی برای فشرده سازی و ارسال در تلگرام ایجاد کنید
_____

  **کرون جاب اول :** ایجاد دیتابیس در هاست
#### ScreenShot
<p align="left">
  <img src="https://github.com/im-JvD/MySQL_Backuper/blob/main/CronJob-1.png" width="460px" />
</p>
اگر طبق تصویر بالا کرون جابتون رو تنظیم کنید ، دقایق 29 و 59 هر ساعت ، از دیتابیسی که در کامند کرون‌جاب انتخاب کردید ، بکاپ میگیره .

#### Command
```
mysqldump --single-transaction --quick -u $DB_USERNAME -p$DB_PASSWORD $DB_NAME > /home/HOSTPATH/public_html/backup/MirzaBOT.sql
```
_____
‌
  **کرون جاب دوم :** ارسال فایل فشرده‌سازی شده در تلگرام
#### ScreenShot
<p align="left">
  <img src="https://github.com/im-JvD/MySQL_Backuper/blob/main/CronJob-2.png" width="460px" />
</p>
اگر طبق تصویر بالا کرون جابتون رو تنظیم کنید ، دقایق 00 و 30 هر ساعت ، فایل دیتابیس رو فشرده و داخل تلگرام ارسال میکنه براتون .

#### Command
```
php /home/$HOSTPATH/public_html/backup/src/auto_backuper.php
```
_____

- لازم به ذکره که مقادیر در دستور `Command` کرون جاب رو که شامل `$DB_USERNAME` و `$DB_PASSWORD` و `$DB_NAME` و `$HOSTPATH` هست رو طبق مشخصات دیتابیس و دایکتوری هاستتون اصلاح کنید .
‌
  - **نام دیتابیس** `$DB_NAME`
  - **نام‌کاربری دیتابیس** `$DB_USERNAME`
  - **رمز عبور دیتابیس** `$DB_PASSWORD`
  - **نام کاربری هاست سی‌پنل** `$HOSTPATH`
